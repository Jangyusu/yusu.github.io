<div class="giscus-wrapper"></div>

<script>
  import { getTheme } from '@utils/theme';

  const $wrapper = document.querySelector('.giscus-wrapper');
  const giscus = document.createElement('script');
  const theme = getTheme() === 'dark' ? 'dark_high_contrast' : 'light';
  const giscusAttributes = {
    src: 'https://giscus.app/client.js',
    'data-repo': 'Jangyusu/yusu.log',
    'data-repo-id': 'R_kgDOJhQrZA',
    'data-category': 'Comments',
    'data-category-id': 'DIC_kwDOJhQrZM4CWlTY',
    'data-mapping': 'pathname',
    'data-strict': '0',
    'data-reactions-enabled': '1',
    'data-emit-metadata': '0',
    'data-input-position': 'bottom',
    'data-theme': theme,
    'data-lang': 'ko',
    crossorigin: 'anonymous',
    async: '',
  };

  Object.entries(giscusAttributes).forEach(([key, value]) => {
    giscus?.setAttribute(key, value);
  });

  $wrapper?.appendChild(giscus);
</script>
